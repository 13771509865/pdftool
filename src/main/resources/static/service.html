<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>接口测试页面</title>
<style>
body { * {
	padding: 0;
	margin: 0;
	border: 0;
}

}
header {
	cursor: pointer;
	background-color: #555555;
	border-radius: 25px;
	border: none;
	color: white;
	padding: 15px 15px;
	text-decoration: none;
	cursor: pointer;
	text-align: center;
}

.hr {
	margin-top: 20px;
	height: 3px;
	border-radius: 25px;
	background: -webkit-linear-gradient(left, red, blue);
	/* Safari 5.1 - 6.0 */
	background: -o-linear-gradient(right, red, blue);
	/* Opera 11.1 - 12.0 */
	background: -moz-linear-gradient(right, red, blue);
	/* Firefox 3.6 - 15 */
	background: linear-gradient(to right, red, blue);
	/* 标准的语法 */
}

.container {
	min-width: 250px;
	margin: 5px 10px;
	padding: 5px 10px;
}

.title {
	font-family: "Arial", "Microsoft YaHei", "黑体", "宋体", sans-serif;
	font-size: 16px;
	cursor: pointer;
	border: 0px solid red;
	border-radius: 5px;
	cursor: pointer;
	background-color: #008CBA;
	border: none;
	color: white;
	padding: 10px 10px;
	text-decoration: none;
}

.show {
	word-wrap: break-word;
	word-break: break-all;
	display: none;
}

.info {
	color: white;
	background-color: #F48E36;
	/*				border: 0px solid red;*/
	border-radius: 5px;
	margin-top: 5px;
	border: none;
	padding: 10px 10px;
	text-decoration: none;
}

.formCls {
	color: white;
	background-color: #4CAF50;
	clear: both;
	border-radius: 5px;
	margin-top: 5px;
	border: none;
	padding: 10px 10px;
	text-decoration: none;
}

.result {
	color: black;
	background-color: #e7e7e7;
	border-radius: 5px;
	margin-top: 5px;
	border: none;
	padding: 10px 10px;
	text-decoration: none;
}
</style>
</head>
<body>
	<header>
		<h1>接口测试页面</h1>
	</header>
	<div class="hr"></div>
	<h3>用户接口</h3>
	<div class="container">
		<div class="title" style="display: none">test1接口</div>
		<div class="show">
			<div class="info">
				test1接口说明<br /> test1接口说明 <br />
				<table>
					<tr>
						<td>是否拦截权限：</td>
						<td>false</td>
					</tr>
				</table>
			</div>
			<div class="formCls">
				<form action=".asd">
					<table>
						<tr>
							<td>用户名:</td>
							<td><input type="text" name="username" width="100px" /></td>
						</tr>
						<tr>
							<td>密码:</td>
							<td><input type="password" name="password" width="100px" /></td>
						</tr>
						<tr>
							<td><input type="button" name="password" width="100px"
								onclick="submitfor(this);" value="提交" /></td>
						</tr>
					</table>
				</form>
			</div>
			<div class="result">
				返回结果<br />
			</div>
		</div>
	</div>
	
	<div class="container">
		<div class="title" >用户信息反馈接口</div>
		<div class="show">
			<div class="info">
				接口说明<br />
				<table>
					<tr>
						<td>是否拦截权限：</td>
						<td>false</td>
					</tr>
				</table>
				url:<br />
				./feedback<br />
				参数:<br />
				type<br />
				content<br />
				address<br />
			</div>
			<div class="formCls">
				<form action="./feedback">
					<table>
						<tr>
							<td>类型（咨询、建议、其他）</td>
							<td><input type="text" name="type" width="100px" /></td>
						</tr>
						<tr>
							<td>反馈内容</td>
							<td><input type="text" name="content" width="100px" /></td>
						</tr>
						<tr>
							<td>联系方式</td>
							<td><input type="text" name="address" width="100px" /></td>
						</tr>
						<tr>
							<td><input type="button" name="address" width="100px"
								onclick="submitfor(this);" value="提交" /></td>
						</tr>
					</table>
				</form>
			</div>
			<div class="result">
				返回结果<br />
			</div>
		</div>
	</div>
	
	<div class="container">
		<div class="title" >用户上传接口</div>
		<div class="show">
			<div class="info">
				接口说明<br />
				<table>
					<tr>
						<td>是否拦截权限：</td>
						<td>false</td>
					</tr>
				</table>
				url:<br />
				./defaultUpload<br />
				参数:<br />
				file<br />
			</div>
			<div class="formCls">
				<form id="fileUpload" action="./defaultUpload" enctype="multipart/form-data">
					<table>
						<tr>
							<td>file</td>
							<td><input type="file" name="file" width="100px" /></td>
						</tr>
						<tr>
							<td><input type="button" name="file" width="100px"
								onclick="submitFile(this);" value="提交" /></td>
						</tr>
					</table>
				</form>
			</div>
			<div class="result">
				返回结果<br />
			</div>
		</div>
	</div>
	
	<div class="container">
		<div class="title" >用户转换接口</div>
		<div class="show">
			<div class="info">
				接口说明<br />
				<table>
					<tr>
						<td>是否拦截权限：</td>
						<td>false</td>
					</tr>
				</table>
				url:<br />
				./convert<br />
				参数:<br />
				convertType<br />
				srcRelativePath<br />
			</div>
			<div class="formCls">
				<form action="./convert">
					<table>
						<tr>
							<td>convertType(36)</td>
							<td><input type="text" name="convertType" width="100px" /></td>
						</tr>
						<tr>
							<td>srcRelativePath</td>
							<td><input type="text" name="srcRelativePath" width="100px" /></td>
						</tr>
						<tr>
							<td><input type="button" name="post" width="100px"
								onclick="submitforJson(this);" value="提交" /></td>
						</tr>
					</table>
				</form>
			</div>
			<div class="result">
				返回结果<br />
			</div>
		</div>
	</div>
	
	<div class="container">
		<div class="title" >用户MQ转换接口</div>
		<div class="show">
			<div class="info">
				接口说明<br />
				<table>
					<tr>
						<td>是否拦截权限：</td>
						<td>false</td>
					</tr>
				</table>
				url:<br />
				./mqconvert<br />
				参数:<br />
				convertType<br />
				srcRelativePath<br />
			</div>
			<div class="formCls">
				<form action="./mqconvert">
					<table>
						<tr>
							<td>convertType(36)</td>
							<td><input type="text" name="convertType" width="100px" /></td>
						</tr>
						<tr>
							<td>srcRelativePath</td>
							<td><input type="text" name="srcRelativePath" width="100px" /></td>
						</tr>
						<tr>
							<td><input type="button" name="post" width="100px"
								onclick="submitforJson(this);" value="提交" /></td>
						</tr>
					</table>
				</form>
			</div>
			<div class="result">
				返回结果<br />
			</div>
		</div>
	</div>
	
	<div class="container">
		<div class="title" >用户下载接口</div>
		<div class="show">
			<div class="info">
				接口说明<br />
				<table>
					<tr>
						<td>是否拦截权限：</td>
						<td>false</td>
					</tr>
				</table>
				url:<br />
				./user/download<br />
				参数:<br />
				fileHash<br />
			</div>
			<div class="formCls">
				<form action="./user/download">
					<table>
						<tr>
							<td>fileHash</td>
							<td><input type="text" name="fileHash" width="100px" /></td>
						</tr>
						<tr>
							<td><input type="button" name="post" width="100px"
								onclick="submitfor(this);" value="提交" /></td>
						</tr>
					</table>
				</form>
			</div>
			<div class="result">
				返回结果<br />
			</div>
		</div>
	</div>
	
	<div class="container">
		<div class="title" >删除文件接口</div>
		<div class="show">
			<div class="info">
				接口说明<br />
				<table>
					<tr>
						<td>是否拦截权限：</td>
						<td>false</td>
					</tr>
				</table>
				url:<br />
				./user/deleteFile<br />
				参数:<br />
				fileHash<br />
			</div>
			<div class="formCls">
				<form action="./user/deleteFile">
					<table>
						<tr>
							<td>fileHash</td>
							<td><input type="text" name="fileHash" width="100px" /></td>
						</tr>
						<tr>
							<td><input type="button" name="post" width="100px"
								onclick="submitfor(this);" value="提交" /></td>
						</tr>
					</table>
				</form>
			</div>
			<div class="result">
				返回结果<br />
			</div>
		</div>
	</div>
	
	<div class="container">
		<div class="title" >查询总IP数接口</div>
		<div class="show">
			<div class="info">
				接口说明<br />
				<table>
					<tr>
						<td>是否拦截权限：</td>
						<td>false</td>
					</tr>
				</table>
				url:<br />
				./statistics/ipCount<br />
				参数:<br />
			</div>
			<div class="formCls">
				<form action="./statistics/ipCount">
					<table>
						<tr>
							<td><input type="button" name="post" width="100px"
								onclick="submitfor(this);" value="提交" /></td>
						</tr>
					</table>
				</form>
			</div>
			<div class="result">
				返回结果<br />
			</div>
		</div>
	</div>
	
	<div class="container">
		<div class="title" >查询总转换次数接口</div>
		<div class="show">
			<div class="info">
				接口说明<br />
				<table>
					<tr>
						<td>是否拦截权限：</td>
						<td>false</td>
					</tr>
				</table>
				url:<br />
				./statistics/convertCount<br />
				参数:<br />
			</div>
			<div class="formCls">
				<form action="./statistics/convertCount">
					<table>
						<tr>
							<td><input type="button" name="post" width="100px"
								onclick="submitfor(this);" value="提交" /></td>
						</tr>
					</table>
				</form>
			</div>
			<div class="result">
				返回结果<br />
			</div>
		</div>
	</div>
	
</body>
<!-- <script src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script> -->
<script src="js/jquery-1.11.0.js"></script>
<script src="js/jquery.serializejson.js"></script>
<script type="text/javascript">
	$(".title").click(function() {
		/* 		$(this).next(".info").toggle("normal");
		 $(this).next().next(".formCls").toggle("normal");
		 $(this).next().next().next(".result").toggle("normal"); */
		$(this).next(".show").toggle("normal");
	});
	function submitfor(obj) {
		var form1 = $(obj).closest("form");
		console.info(form1.serialize());
		console.info(form1.attr("action"));
		$.ajax({
			url : form1.attr("action"),
			data : form1.serialize(),
			dataType : "json",
			statusCode : {
				404 : function() {
					alert('not found');
				}
			},
			success : function(data) {
				if (form1.attr("action").indexOf("login.do") > 0
						&& data.errorcode == 0) {
					$("input[name='token']").val(data.data);
					$("#imgCode").attr("src", "./imgCode.do?" + Math.random());
				}
				if (form1.attr("action").indexOf("loginOut.do") > 0
						&& data.errorcode == 0) {
					$("input[name='token']").val("");
					$("#imgCode").attr("src", "./imgCode.do?" + Math.random());
				}
				/* console.info(eval(data)); */
				$(obj).parentsUntil('.container').children(".result").html(
						JSON.stringify(data));
				// data 可能是 xmlDoc, jsonObj, html, text, 等等...
			}
		});
	}
	
	function submitforJson(obj) {
		var form1 = $(obj).closest("form");
		console.info(form1.serialize());
		console.info(form1.attr("action"));
		$.ajax({
			url : form1.attr("action"),
			type: "post",
			contentType: "application/json; charset=utf-8",
			data : JSON.stringify(form1.serializeJSON()),
			dataType : "json",
			statusCode : {
				404 : function() {
					alert('not found');
				}
			},
			success : function(data) {
				if (form1.attr("action").indexOf("login.do") > 0
						&& data.errorcode == 0) {
					$("input[name='token']").val(data.data);
					$("#imgCode").attr("src", "./imgCode.do?" + Math.random());
				}
				if (form1.attr("action").indexOf("loginOut.do") > 0
						&& data.errorcode == 0) {
					$("input[name='token']").val("");
					$("#imgCode").attr("src", "./imgCode.do?" + Math.random());
				}
				/* console.info(eval(data)); */
				$(obj).parentsUntil('.container').children(".result").html(
						JSON.stringify(data));
				// data 可能是 xmlDoc, jsonObj, html, text, 等等...
			}
		});
	}
	
	function submitFile(obj) {
		var form1 = $(obj).closest("form");
		console.info(form1.serialize());
		console.info(form1.attr("action"));
		var formData = new FormData($('#fileUpload')[0]);
		$.ajax({
			type: "post",
			url : form1.attr("action"),
			data : formData,
			dataType : "json",
			cache: false,
            processData: false,
            contentType: false,
			statusCode : {
				404 : function() {
					alert('not found');
				}
			},
			success : function(data) {
				if (form1.attr("action").indexOf("login.do") > 0
						&& data.errorcode == 0) {
					$("input[name='token']").val(data.data);
					$("#imgCode").attr("src", "./imgCode.do?" + Math.random());
				}
				if (form1.attr("action").indexOf("loginOut.do") > 0
						&& data.errorcode == 0) {
					$("input[name='token']").val("");
					$("#imgCode").attr("src", "./imgCode.do?" + Math.random());
				}
				/* console.info(eval(data)); */
				$(obj).parentsUntil('.container').children(".result").html(
						JSON.stringify(data));
				// data 可能是 xmlDoc, jsonObj, html, text, 等等...
			}
		});
	}
</script>

</html>